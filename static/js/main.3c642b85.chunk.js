(this["webpackJsonpneed-for-drive"]=this["webpackJsonpneed-for-drive"]||[]).push([[0],Array(23).concat([function(e,a,t){e.exports=t.p+"static/media/car.9c23a583.png"},,,,,,,,,,,,,,,function(e,a,t){e.exports=t.p+"static/media/slide_1.fe2f03dd.jpg"},function(e,a,t){e.exports=t.p+"static/media/slide_2.b73b2bee.jpg"},function(e,a,t){e.exports=t.p+"static/media/slide_3.5dc85ddc.jpg"},function(e,a,t){e.exports=t.p+"static/media/slide_4.085022d6.jpg"},function(e,a,t){e.exports=t.p+"static/media/Geo.f2245ebb.svg"},,function(e,a,t){e.exports=t.p+"static/media/Person.39670054.svg"},,,,,,,,,,,,,,,,function(e,a,t){e.exports=t(105)},,,,,function(e,a,t){},,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(37),o=t.n(r),i=(t(65),t(20)),l=t(31),s=t(32),m=t(33),d=t(34),u=t(107),p=t(108);t(66),t(67),t(68),t(69),t(70);var _=function(e){var a=e.title,t=e.type,n=e.action,r=e.disable;return c.a.createElement("button",{type:"button",className:"button "+t,onClick:n,disabled:r||!1},a)};function h(e){var a=e.img,t=e.head,n=e.text,r=e.color,o={backgroundImage:"url(".concat(a,")")};return c.a.createElement("div",{className:"slide",style:o},c.a.createElement("span",{className:"slide__content"},c.a.createElement("h1",{className:"slide__content__heading"},t),c.a.createElement("p",{className:"slide__content__text"},n),c.a.createElement(_,{title:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435",type:"slide__content__btn ".concat(r)})))}var b=t(38),f=t.n(b),E=t(39),g=t.n(E),v=t(40),N=t.n(v),k=t(41),y=t.n(k);i.a.use([l.a,s.a,m.a,d.a]);var O=[{head:"\u0411\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u0430\u044f \u043f\u0430\u0440\u043a\u043e\u0432\u043a\u0430",text:"\u041e\u0441\u0442\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u043c\u0430\u0448\u0438\u043d\u0443 \u043d\u0430 \u043f\u043b\u0430\u0442\u043d\u044b\u0445 \u0433\u043e\u0440\u043e\u0434\u0441\u043a\u0438\u0445 \u043f\u0430\u0440\u043a\u043e\u0432\u043a\u0430\u0445 \u0438 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u043d\u044b\u0445 \u043c\u0435\u0441\u0442\u0430\u0445, \u043d\u0435 \u043d\u0430\u0440\u0443\u0448\u0430\u044f \u041f\u0414\u0414, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0432 \u0430\u044d\u0440\u043e\u043f\u043e\u0440\u0442\u0430\u0445",img:f.a,color:"default"},{head:"\u0421\u0442\u0440\u0430\u0445\u043e\u0432\u043a\u0430",text:"\u041f\u043e\u043b\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u0445\u043e\u0432\u043a\u0430 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f",img:g.a,color:"aqua"},{head:"\u0411\u0435\u043d\u0437\u0438\u043d",text:"\u041f\u043e\u043b\u043d\u044b\u0439 \u0431\u0430\u043a \u043d\u0430 \u043b\u044e\u0431\u043e\u0439 \u0437\u0430\u043f\u0440\u0430\u0432\u043a\u0435 \u0433\u043e\u0440\u043e\u0434\u0430 \u0437\u0430 \u043d\u0430\u0448 \u0441\u0447\u0451\u0442",img:N.a,color:"red"},{head:"\u041e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435",text:"\u0410\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c \u043f\u0440\u043e\u0445\u043e\u0434\u0438\u0442 \u0435\u0436\u0435\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u043e\u0435 \u0422\u041e",img:y.a,color:"violet"}];var C=function(){var e=O.map((function(e,a){return c.a.createElement(u.a,{key:e.text.length*a},c.a.createElement(h,{head:e.head,text:e.text,img:e.img,key:a,color:e.color}))}));return c.a.createElement(p.a,{loop:!0,slidesPerView:1,navigation:!0,pagination:{clickable:!0}},e)},j=t(12),I=t(13),S=t(15),x=t(14),w=t(42),T=t.n(w),R=(t(71),t(9)),F=function(e){Object(S.a)(t,e);var a=Object(x.a)(t);function t(){return Object(j.a)(this,t),a.apply(this,arguments)}return Object(I.a)(t,[{key:"render",value:function(){return c.a.createElement("header",{className:"header"},c.a.createElement(R.b,{className:"header__site-name",to:"/"},"Need for drive"),c.a.createElement("span",{className:"header__geolocation"},c.a.createElement("img",{className:"header__geolocation__icon",src:T.a,alt:"GeoLocation"}),c.a.createElement("p",null,"\u041a\u0440\u0430\u0441\u043d\u043e\u0434\u0430\u0440")))}}]),t}(c.a.Component);t(76);function P(){return c.a.createElement("div",{className:"main-page__content__info-block"},c.a.createElement("h1",{className:"main-page__content__info-block__heading"},"\u041a\u0430\u0440\u0448\u0435\u0440\u0438\u043d\u0433",c.a.createElement("br",null),c.a.createElement("span",{className:"main-page__content__info-block__heading__eng"},"Need for drive")),c.a.createElement("p",{className:"main-page__content__info-block__text"},"\u041f\u043e\u043c\u0438\u043d\u0443\u0442\u043d\u0430\u044f \u0430\u0440\u0435\u043d\u0434\u0430 \u0430\u0432\u0442\u043e \u0442\u0432\u043e\u0435\u0433\u043e \u0433\u043e\u0440\u043e\u0434\u0430"),c.a.createElement(R.b,{className:"button fake-btn big-btn",to:"/order-page/"},"\u0417\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))}t(77);function M(){return c.a.createElement("footer",{className:"footer"},c.a.createElement("span",{className:"footer__copyright"},"\xa9 2016-2020 \xabNeed for drive\xbb"),c.a.createElement("a",{href:"tel: 84952342244",className:"footer__phone-number"},"8 (495) 234-22-44"))}var D=function(){return c.a.createElement("div",{className:"main-page"},c.a.createElement("div",{className:"main-page__content"},c.a.createElement(F,null),c.a.createElement(P,null),c.a.createElement(M,null)),c.a.createElement(C,null))},A=t(2);t(78);function z(e){var a=e.action,t=e.active;return c.a.createElement("button",{className:"nav-btn",onClick:a},c.a.createElement("span",{className:"nav-btn__toggle"+(t?" active":"")},c.a.createElement("span",{className:"nav-btn__bar__wrapper"},c.a.createElement("span",{className:"nav-btn__bar"}))))}t(79);var L=function(){var e=Object(n.useState)(!1),a=Object(A.a)(e,2),t=a[0],r=a[1],o=Object(n.useState)(!1),i=Object(A.a)(o,2),l=i[0],s=i[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"nav-bar"},c.a.createElement(z,{active:t,action:function(){return r(!t)}}),c.a.createElement("button",{className:"nav-btn__lang"+(t?" active":""),onClick:function(){return s(!l)}},l?"\u0420\u0443\u0441":"Eng")),c.a.createElement("div",{className:"nav-menu"+(t?"  active":"")},c.a.createElement("nav",{className:"nav-menu__link-list"},["\u041f\u0430\u0440\u043a\u043e\u0432\u043a\u0430","\u0421\u0442\u0440\u0430\u0445\u043e\u0432\u043a\u0430","\u0411\u0435\u043d\u0437\u0438\u043d","\u041e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435"].map((function(e,a){return c.a.createElement("a",{key:a,className:"nav-menu__link-list__link",href:"#"},e)})),c.a.createElement("span",{className:"nav-menu__link-list__social-block"},["telegram","facebook","instagram"].map((function(e,a){return c.a.createElement("span",{key:a,className:"icon icon-".concat(e)})}))))))},G=t(8),q=t(7),H=t(5);t(80),t(81);var U=function(e){var a=e.name,t=e.type,n=e.placeholder,r=e.onChangeAction,o=e.value,i=e.defaultChecked,l=e.checked,s=e.description,m=e.list,d=e.dateFrom,u=e.dateTo,p=e.disabled,_=e.delAction,h=e.readOnly;return"text"===t||"datetime-local"===t||"select"===t?c.a.createElement("label",{className:"label-for-text-input"},s,c.a.createElement("input",{autoComplete:"off",className:"textInput",type:t,min:"datetime-local"===t?"dateTo"===a&&0!==d?"".concat(d):"".concat((new Date).getFullYear(),"-").concat("".concat((new Date).getMonth()+1).padStart(2,0),"-").concat("".concat((new Date).getDate()).padStart(2,0),"T").concat("".concat((new Date).getHours()).padStart(2,0),":").concat("".concat((new Date).getMinutes()).padStart(2,0)):"",max:"datetime-local"===t?"dateTo"===a&&0!==d?"".concat(new Date(d).getFullYear(),"-").concat("".concat(new Date(d).getMonth()+2).padStart(2,0),"-").concat("".concat(new Date(d).getDate()).padStart(2,0),"T").concat("".concat(new Date(d).getHours()).padStart(2,0),":").concat("".concat(new Date(d).getMinutes()).padStart(2,0)):"".concat(u):"",required:"required",name:a,placeholder:n,onChange:r,value:o,list:m,disabled:p}),"text"===t?c.a.createElement("button",{name:a,value:"",onClick:_||r,className:"reset-btn",title:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043f\u043e\u043b\u0435"},"\xd7"):""):"radio"===t?c.a.createElement("label",{className:"radio-btn__description"},c.a.createElement("input",{className:"radio-btn",type:"radio",name:a,value:o,onChange:r,checked:l,defaultChecked:i}),c.a.createElement("span",null,s)):c.a.createElement("label",{className:"checkbox__description"},c.a.createElement("input",{readOnly:h,className:"checkbox",type:"checkbox",name:a,value:o,onChange:r,checked:l}),c.a.createElement("span",null,s))},$=t(21),B=t(18),W=function(e){Object(S.a)(t,e);var a=Object(x.a)(t);function t(e){var n;return Object(j.a)(this,t),(n=a.call(this,e)).getMarks=n.getMarks.bind(Object(H.a)(n)),n.onLoadMap=n.onLoadMap.bind(Object(H.a)(n)),n.state={cityMarks:[],pointMarks:[]},n.ymaps=null,n}return Object(I.a)(t,[{key:"getMarks",value:function(e){var a=this;this.props["cityMarks"===e?"cities":"points"].map((function(t){return a.ymaps.geocode("cityMarks"===e?t.name:"".concat(t.cityId.name," ").concat(t.address),{json:!0,results:1}).then((function(t){var n=t.GeoObjectCollection.featureMember[0].GeoObject;a.setState((function(a){return Object(q.a)({},e,[].concat(Object($.a)(a[e]),[n]))}))}))}))}},{key:"getPointName",value:function(e){return e.replace(/(\u043f\u0440\u043e\u0441\u043f\u0435\u043a\u0442|\u0443\u043b\u0438\u0446\u0430|[\.,])/gi,"").replace(/(\d+)(\u043a\.?)(\d+)/i,"$1, \u043a\u043e\u0440\u043f.$3").trim()}},{key:"onLoadMap",value:function(e){this.ymaps=e,this.getMarks("pointMarks"),this.getMarks("cityMarks")}},{key:"placemarkHandeler",value:function(e){var a=this.getPointName(e.name).trim();this.props.action("","pointId",a),this.map.setCenter(e.Point.pos.split(" ",2).reverse(),17,{checkZoomRange:!0})}},{key:"cityHandler",value:function(e){this.props.action("","cityId",e.metaDataProperty.GeocoderMetaData.Address.Components.find((function(e){return"locality"===e.kind})).name),this.map.setCenter(e.Point.pos.split(" ",2).reverse(),10,{checkZoomRange:!0})}},{key:"render",value:function(){var e=this,a=this.props,t=a.point,n=a.city,r=this.state,o=r.pointMarks,i=r.cityMarks,l=o.find((function(a){return e.getPointName(a.name).trim()===t})),s=i.find((function(e){return e.name===n.name}));return c.a.createElement(B.f,{query:{ns:"use-load-option",apikey:"74a51f5a-db87-407e-a41b-db660460a9fb"},className:"map"},c.a.createElement(B.c,{instanceRef:function(a){return e.map=a},width:"100%",height:"100%",onLoad:function(a){e.onLoadMap(a)},defaultState:{center:[54.75,49.57],zoom:2},modules:["geolocation","geocode","geoObject.addon.hint"],state:t&&l?{center:l.Point.pos.split(" ",2).reverse(),zoom:17}:n.id&&s?{center:s.Point.pos.split(" ",2).reverse(),zoom:10}:{center:[54.75,49.57],zoom:5}},!n.id&&i.map((function(a){return c.a.createElement(B.a,{key:a.Point.pos,onClick:e.cityHandler.bind(e,a),geometry:[a.Point.pos.split(" ",2).reverse(),2e4],options:{interactiveZIndex:!0,fillColor:"#0ec26194",strokeColor:"#0ec261",strokeOpacity:.9,strokeWidth:1},properties:{hintContent:a.request}})})),n.id&&o.map((function(a){return a.metaDataProperty.GeocoderMetaData.Address.Components.find((function(e){return"locality"===e.kind})).name===n.name?c.a.createElement(B.d,{key:a.Point.pos,onClick:e.placemarkHandeler.bind(e,a),geometry:a.Point.pos.split(" ",2).reverse(),options:{preset:"islands#autoCircleIcon",iconColor:"rgb(14 194 97)",iconShadow:!0},properties:{iconCaption:e.getPointName(a.name)}}):""}))))}}]),t}(c.a.Component);t(82);function J(){return c.a.createElement("div",{className:"loading-window"},c.a.createElement("div",{className:"car"},c.a.createElement("div",{className:"strike"}),c.a.createElement("div",{className:"strike strike2"}),c.a.createElement("div",{className:"strike strike3"}),c.a.createElement("div",{className:"strike strike4"}),c.a.createElement("div",{className:"strike strike5"}),c.a.createElement("div",{className:"car-detail spoiler"}),c.a.createElement("div",{className:"car-detail back"}),c.a.createElement("div",{className:"car-detail center"}),c.a.createElement("div",{className:"car-detail center1"}),c.a.createElement("div",{className:"car-detail front"}),c.a.createElement("div",{className:"car-detail wheel"}),c.a.createElement("div",{className:"car-detail wheel wheel2"})))}var X=function(e){Object(S.a)(t,e);var a=Object(x.a)(t);function t(e){var n;return Object(j.a)(this,t),(n=a.call(this,e)).state={cities:[],points:[]},n.handleChange=n.handleChange.bind(Object(H.a)(n)),n.controller=new AbortController,n}return Object(I.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props,t=a.api,n=a.headers;fetch("".concat(t,"city"),{headers:n,signal:this.controller.signal}).then((function(e){return e.json()})).then((function(a){var t=a.data;e.setState({cities:t})})).catch((function(e){return console.error("ERROR",e)})),fetch("".concat(t,"point/"),{headers:n,signal:this.controller.signal}).then((function(e){return e.json()})).then((function(a){var t=a.data;e.setState({points:t})})).catch((function(e){return console.error("ERROR",e)}))}},{key:"componentWillUnmount",value:function(){this.controller.abort()}},{key:"handleChange",value:function(e,a,t){var n=this.state,c=n.cities,r=n.points,o=this.props.getLocation,i=e?e.target.value:t,l="cityId"===a?c.filter((function(e){return e.name.replace(/(\u043f\u0440\u043e\u0441\u043f\u0435\u043a\u0442|\u0443\u043b\u0438\u0446\u0430|[\.,])/gi,"").replace(/(\d+)(\u043a\.?)(\d+)/i,"$1, \u043a\u043e\u0440\u043f.$3").trim()===i.replace(/(\u043f\u0440\u043e\u0441\u043f\u0435\u043a\u0442|\u0443\u043b\u0438\u0446\u0430|[\.,])/gi,"").replace(/(\d+)(\u043a\.?)(\d+)/i,"$1, \u043a\u043e\u0440\u043f.$3").trim()})):r.filter((function(e){return e.address.replace(/(\u043f\u0440\u043e\u0441\u043f\u0435\u043a\u0442|\u0443\u043b\u0438\u0446\u0430|[\.,])/gi,"").replace(/(\d+)(\u043a\.?)(\d+)/i,"$1, \u043a\u043e\u0440\u043f.$3").trim()===i.replace(/(\u043f\u0440\u043e\u0441\u043f\u0435\u043a\u0442|\u0443\u043b\u0438\u0446\u0430|[\.,])/gi,"").replace(/(\d+)(\u043a\.?)(\d+)/i,"$1, \u043a\u043e\u0440\u043f.$3").trim()}));o(a,l[0]?l[0]:{name:i,id:""})}},{key:"render",value:function(){var e=this,a=this.props,t=a.city,n=a.point,r=a.action;return c.a.createElement("div",{className:"step-one"},c.a.createElement("form",{className:"step-one__form"},c.a.createElement(U,{name:"cityId",description:"\u0413\u043e\u0440\u043e\u0434",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",type:"text",list:"city",onChangeAction:function(a){return e.handleChange(a,"cityId")},value:t.name,delAction:r}),c.a.createElement("datalist",{id:"city"},this.state.cities.map((function(e,a){return n.id?e.name===n.cityId.name?c.a.createElement("option",{key:a,id:e.id,value:e.name}):"":c.a.createElement("option",{key:a,id:e.id,value:e.name})}))),c.a.createElement("br",null),c.a.createElement(U,{name:"point",description:"\u041f\u0443\u043d\u043a\u0442 \u0412\u044b\u0434\u0430\u0447\u0438",placeholder:t.name&&t.id&&this.state.points.find((function(e){return e.cityId.name===t.name}))?"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043e\u0447\u043a\u0443 \u0432\u044b\u0434\u0430\u0447\u0438":"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u043f\u0443\u043d\u043a\u0442\u043e\u0432",disabled:!(t.name&&t.id&&this.state.points.find((function(e){return e.cityId.name===t.name}))),type:"text",list:"point",onChangeAction:function(a){return e.handleChange(a,"pointId")},value:n.name}),c.a.createElement("datalist",{id:"point"},this.state.points.map((function(e,a){return e.cityId.name===t.name?c.a.createElement("option",{key:a,id:e.id,value:e.address},e.name):""})))),c.a.createElement("div",{className:"map-block"},c.a.createElement("p",{className:"map-block__description"},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043d\u0430 \u043a\u0430\u0440\u0442\u0435:"),this.state.cities.length&&this.state.points.length&&c.a.createElement("div",{className:"map-block__map-container"},c.a.createElement(W,{action:this.handleChange,cities:this.state.cities,points:this.state.points,city:t,point:n.address}))||c.a.createElement("div",{className:"loader-container"},c.a.createElement(J,null))))}}]),t}(c.a.Component);t(83);function Z(e){var a=e.title,t=e.costMin,n=e.costMax,r=e.pic,o=e.car,i=e.getCar,l=e.carId,s=e.display;return c.a.createElement("label",{className:"car-card",style:{display:s}},c.a.createElement("input",{className:"car-card__radio-btn",type:"radio",name:"car",value:a,onChange:function(){i("carId",l)},checked:a===o?"checked":""}),c.a.createElement("div",{className:"car-card__info-card"},c.a.createElement("h2",{className:"car-card__info-card__head"},a),c.a.createElement("p",{className:"car-card__info-card__cost"},t," - ",n,"\u20bd"),c.a.createElement("img",{crossOrigin:"anonymous",referrerPolicy:"origin",className:"car-card__info-card__img",src:"http://api-factory.simbirsoft1.com".concat(r),alt:"car"})))}t(84);var Y=function(e){Object(S.a)(t,e);var a=Object(x.a)(t);function t(e){var n;return Object(j.a)(this,t),(n=a.call(this,e)).state={category:"all",cars:[]},n.handleChange=n.handleChange.bind(Object(H.a)(n)),n}return Object(I.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getCars(),fetch("".concat(this.props.api,"car"),{headers:this.props.headers}).then((function(e){return e.json()})).then((function(a){var t=a.data;e.setState({cars:t})})).catch((function(e){return console.error("ERROR",e)}))}},{key:"getCars",value:function(){var e=this;return this.state.cars.map((function(a){return c.a.createElement(Z,{display:"all"===e.state.category||e.state.category===a.categoryId.name?"":"none",action:e.props.action,getCar:e.props.actionCar,title:a.name,costMin:a.priceMin,costMax:a.priceMax,carId:a,pic:a.thumbnail.path,key:a.id,car:e.props.currentCar})}))}},{key:"handleChange",value:function(e){this.setState({category:e.target.value})}},{key:"render",value:function(){return c.a.createElement("div",{className:"car-selector"},c.a.createElement("form",{className:"car-selector__category-form",onChange:this.handleChange},[{value:"all",check:!0,description:"\u0412\u0441\u0435 \u043c\u043e\u0434\u0435\u043b\u0438"},{value:"\u042d\u043a\u043e\u043d\u043e\u043c",check:!1,description:"\u042d\u043a\u043e\u043d\u043e\u043c"},{value:"\u041f\u0440\u0435\u043c\u0438\u0443\u043c",check:!1,description:"\u041f\u0440\u0435\u043c\u0438\u0443\u043c"}].map((function(e,a){return c.a.createElement(U,{key:a,type:"radio",name:"model",value:e.value,defaultChecked:e.check,description:e.description})}))),c.a.createElement("div",{className:"car-selector__container"},c.a.createElement("form",{className:"car-selector__container__car-list"},this.getCars())))}}]),t}(c.a.Component);t(85);var V=function(e){var a=e.action,t=e.actionClick,r=e.currentColor,o=e.colors,i=e.options,l=e.tariff,s=e.dateFrom,m=e.dateTo,d=e.api,u=e.headers,p=e.actionInfo,_=Object(n.useState)([]),h=Object(A.a)(_,2),b=h[0],f=h[1];return Object(n.useEffect)((function(){fetch("".concat(d,"rate"),{headers:u}).then((function(e){return e.json()})).then((function(e){var a=e.data;f(a),l||p("rateId",a[0])})).catch((function(e){return console.error("ERROR",e)}))}),[]),c.a.createElement("div",{className:"step-three"},c.a.createElement("form",{className:"step-three__form"},c.a.createElement("fieldset",{className:"step-three__form__color-selector"},c.a.createElement("legend",null,"\u0426\u0432\u0435\u0442"),c.a.createElement("br",null),["\u041b\u044e\u0431\u043e\u0439"].concat(Object($.a)(o)).map((function(e,t){return c.a.createElement(U,{key:t,type:"radio",name:"currentColor",value:e,checked:r===e,description:e,onChangeAction:a})}))),c.a.createElement("fieldset",{className:"step-three__form__date-selector"},c.a.createElement("legend",null,"\u0414\u0430\u0442\u0430 \u0430\u0440\u0435\u043d\u0434\u044b"),c.a.createElement(U,{dateTo:m,onChangeAction:a,name:"dateFrom",description:"\u0421",type:"datetime-local",value:s}),c.a.createElement("br",null),c.a.createElement(U,{dateFrom:s,onChangeAction:a,name:"dateTo",description:"\u0414\u043e",value:m,type:"datetime-local"})),c.a.createElement("fieldset",{className:"step-three__form__tariff"},c.a.createElement("legend",null,"\u0422\u0430\u0440\u0438\u0444"),c.a.createElement("br",null),b.map((function(e,a){return c.a.createElement(U,{key:a,type:"radio",checked:l===e.rateTypeId.name,description:"".concat(e.rateTypeId.name,",\n               ").concat(e.price,"\u20bd/").concat(e.rateTypeId.unit),onChangeAction:function(){return p("rateId",e)}})}))),c.a.createElement("fieldset",{className:"step-three__form__additional"},c.a.createElement("legend",null,"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438"),c.a.createElement("br",null),[{name:"isFullTank",description:"\u041f\u043e\u043b\u043d\u044b\u0439 \u0431\u0430\u043a, 500\u0440"},{name:"isNeedChildChair",description:"\u0414\u0435\u0442\u0441\u043a\u043e\u0435 \u043a\u0440\u0435\u0441\u043b\u043e, 200\u0440"},{name:"isRightWheel",description:"\u041f\u0440\u0430\u0432\u044b\u0439 \u0440\u0443\u043b\u044c, 1600\u0440"}].map((function(e,a){return c.a.createElement(U,{key:a,type:"checkbox",name:e.name,checked:i[a],description:e.description,onChangeAction:t})})))))};t(86);var K=function(e){var a=e.carId,t=e.dateFrom,n=a.name,r=a.number,o=a.tank,i=a.thumbnail;return c.a.createElement("div",{className:"step-four"},c.a.createElement("div",{className:"step-four__info-block"},c.a.createElement("h1",{className:"step-four__info-block__brand"},n),c.a.createElement("p",{className:"step-four__info-block__number"},r?r.replace(/(\d{3})/," $1 "):"A 000 AA"),c.a.createElement("p",{className:"step-four__info-block__fuel"},c.a.createElement("span",null,"\u0422\u043e\u043f\u043b\u0438\u0432\u043e "),o||"0","%"),c.a.createElement("p",{className:"step-four__info-block__avilable"},c.a.createElement("span",null,"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0441 "),new Date(t).toLocaleString("ru",{day:"numeric",month:"numeric",year:"numeric",timezone:"UTC",hour:"numeric",minute:"numeric",second:"numeric"}))),c.a.createElement("div",{className:"step-four__car"},c.a.createElement("img",{crossOrigin:"anonymous",referrerPolicy:"origin",className:"car-card__info-card__img",src:"http://api-factory.simbirsoft1.com".concat(i.path),alt:"car"})))};t(87);function Q(e){var a=e.actionReturn,t=e.data,n=e.getInfo,r=e.orderId,o=Object(G.g)(),i="http://api-factory.simbirsoft1.com/api/db/",l={"X-Api-Factory-Application-Id":"5e25c641099b810b946c5d5b","Content-Type":"application/json"};return c.a.createElement("div",{className:"warning"},c.a.createElement("div",{className:"warning__btns-block"},c.a.createElement("h1",{className:"warning__btns-block__head"},r?"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437?":"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437?"),c.a.createElement("span",null,c.a.createElement(_,{title:r?"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c":"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c",type:"warn-btn",action:r?function(){fetch("".concat(i,"order/").concat(r),{method:"PUT",headers:l,body:JSON.stringify({orderStatusId:{name:"cancelled",id:"5e26a1f5099b810b946c5d8c"}})}).catch((function(e){return console.error("ERROR",e)})),n("orderStatus","cancelled"),a()}:function(){fetch("".concat(i,"order"),{method:"POST",headers:l,body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){var a=e.data;localStorage.setItem("orderId",a.id),n("orderId",a.id),o.push("/order-page/order/".concat(a.id))})).catch((function(e){return console.error("ERROR",e)}))}}),c.a.createElement(_,{title:r?"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f":"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",type:"warn-btn red-btn",action:a}))))}t(88);var ee=function(e){var a=e.params,t=e.action,r=e.getPrice,o=e.orderData,i=e.api,l=e.getInfo,s=Object(n.useState)(!1),m=Object(A.a)(s,2),d=m[0],u=m[1],p=a.currentStep,h=a.cityId,b=a.pointId,f=a.carId,E=a.currentColor,g=a.dateFrom,v=a.dateTo,N=a.isFullTank,k=a.isNeedChildChair,y=a.isRightWheel,O=a.rateId,C=a.price,j=a.color,I=a.id,S=a.orderStatusId,x=f.name,w=Object(G.g)(),T=(new Date(v)-new Date(g))/6e4,R=Math.trunc(T/60);return c.a.createElement(c.a.Fragment,null,d&&c.a.createElement(Q,{orderId:I,api:i,actionReturn:function(){return u(!d)},data:o,getInfo:l}),c.a.createElement("div",{className:"total"},c.a.createElement("h1",{className:"total__head"},"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437:"),c.a.createElement("div",{className:"total__list"},h.id&&b.id&&c.a.createElement("p",{className:"total__list__item"},c.a.createElement("span",{className:"text"},"\u041f\u0443\u043d\u043a\u0442 \u0432\u044b\u0434\u0430\u0447\u0438"),c.a.createElement("span",{className:"dots"}),c.a.createElement("span",{className:"text__dinamic"},h.name,c.a.createElement("br",null)," ",b.name)),x&&c.a.createElement("p",{className:"total__list__item"},c.a.createElement("span",{className:"text"},"\u041c\u043e\u0434\u0435\u043b\u044c")," ",c.a.createElement("span",{className:"dots"}),c.a.createElement("span",{className:"text__dinamic"},x)),(j||x&&E)&&c.a.createElement("p",{className:"total__list__item"},c.a.createElement("span",{className:"text"},"\u0426\u0432\u0435\u0442")," ",c.a.createElement("span",{className:"dots"}),c.a.createElement("span",{className:"text__dinamic"},j||E)),0!==g&&0!==v&&c.a.createElement("p",{className:"total__list__item"},c.a.createElement("span",{className:"text"},"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0430\u0440\u0435\u043d\u0434\u044b"),c.a.createElement("span",{className:"dots"}),c.a.createElement("span",{className:"text__dinamic"},function(){function e(e,a){var t=e%100,n=9<t&&t<21?a[0]:1<t%10&&t%10<5?a[1]:t%10===1?a[2]:a[0];return"".concat(e," ").concat(n," ")}return"\u041f\u043e\u043c\u0438\u043d\u0443\u0442\u043d\u043e"===O.rateTypeId.name?"".concat(e(R,["\u0447\u0430\u0441\u043e\u0432","\u0447\u0430\u0441\u0430","\u0447\u0430\u0441"])," ").concat(Math.trunc(T%60)," \u043c\u0438\u043d."):e(Math.trunc(T/1440),["\u0434\u043d\u0435\u0439","\u0434\u043d\u044f","\u0434\u0435\u043d\u044c"])}())),x&&O.rateTypeId.name&&c.a.createElement("p",{className:"total__list__item"},c.a.createElement("span",{className:"text"},"\u0422\u0430\u0440\u0438\u0444")," ",c.a.createElement("span",{className:"dots"}),c.a.createElement("span",{className:"text__dinamic"},O.rateTypeId.name)),x&&N&&c.a.createElement("p",{className:"total__list__item"},c.a.createElement("span",{className:"text"},"\u041f\u043e\u043b\u043d\u044b\u0439 \u0431\u0430\u043a"),c.a.createElement("span",{className:"dots"}),c.a.createElement("span",{className:"text__dinamic"},"\u0414\u0430")),k&&c.a.createElement("p",{className:"total__list__item"},c.a.createElement("span",{className:"text"},"\u0414\u0435\u0442\u0441\u043a\u043e\u0435 \u043a\u0440\u0435\u0441\u043b\u043e"),c.a.createElement("span",{className:"dots"}),c.a.createElement("span",{className:"text__dinamic"},"\u0414\u0430")),y&&c.a.createElement("p",{className:"total__list__item"},c.a.createElement("span",{className:"text"},"\u041f\u0440\u0430\u0432\u044b\u0439 \u0440\u0443\u043b\u044c"),c.a.createElement("span",{className:"dots"}),c.a.createElement("span",{className:"text__dinamic"},"\u0414\u0430")),c.a.createElement("p",{className:"total__sum"},c.a.createElement("span",null,"\u0418\u0442\u043e\u0433\u043e:")," ",C?"".concat(C," \u20bd"):f.priceMin?T>0&&O.price?"".concat(r()," \u20bd"):"".concat(f.priceMin," \u20bd - ").concat(f.priceMax," \u20bd"):"\u043e\u0442 8 000 \u0434\u043e 12 000 \u20bd"),I?S&&c.a.createElement(_,{title:"cancelled"===S.name?"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e":"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",type:"big-btn ".concat("cancelled"===S.name?"":"red-btn"," "),action:"cancelled"===S.name?function(){localStorage.removeItem("orderId"),w.push("/"),l("orderId","")}:function(){return u(!d)}}):c.a.createElement(_,{type:"big-btn",title:["\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u044c","\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e","\u0418\u0442\u043e\u0433\u043e","\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c","\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"][p],action:3===+p?function(){return u(!d)}:t,disable:function(e){switch(+e){case 0:return!h.id||!b.id;case 1:return!(h.id&&b.id&&x);case 2:return!(h.id&&b.id&&x&&g&&v&&O);case 3:default:return!1}}(p)}))))};var ae=function(e){var a=e.getInfo,t=e.orderStatus,r=Object(G.i)().orderId,o=Object(n.useState)([]),i=Object(A.a)(o,2),l=i[0],s=i[1],m=Object(n.useState)(!1),d=Object(A.a)(m,2),u=d[0],p=d[1],_={"X-Api-Factory-Application-Id":"5e25c641099b810b946c5d5b"},h=Object(G.g)();return Object(n.useEffect)((function(){p(!1);var e=new AbortController;return fetch("".concat("http://api-factory.simbirsoft1.com/api/db/","order/").concat(r),{method:"GET",headers:_,signal:e.signal}).then((function(e){return e.json()})).then((function(e){var t=e.data;return s(t),a("orderId",r),a("orderStatus",t.orderStatusId.name),p(!0),t})).catch((function(){localStorage.removeItem("orderId"),a("orderId",""),a("orderStatus",""),h.push("/order-page/")})),function(){return e.abort()}}),[t]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"order-page__container__form"},u?c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",{className:"final-page__head"},function(e){switch(e){case"new":return"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u0441\u043e\u0437\u0434\u0430\u043d:";case"issued":return"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u044f\u0442 \u0438 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442\u0441\u044f:";case"confirmed":return"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d:";case"cancelled":return"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043e\u0442\u043c\u0435\u043d\u0435\u043d:";default:return"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437:"}}(l.orderStatusId.name)),c.a.createElement(K,{carId:l.carId,dateFrom:l.dateFrom})):c.a.createElement("div",{className:"loader-container"},c.a.createElement(J,null))),c.a.createElement("div",{className:"order-page__container__total"},u&&c.a.createElement(ee,{getInfo:a,params:l})))};function te(e){var a=e.value,t=e.action,n=e.description,r=e.completedStep;return c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:"order-page__nav__btn",name:"currentStep",value:a,onClick:t,disabled:a>r?"disabled":""},n," ",3!==a&&c.a.createElement("span",null," \u25ba ")))}t(89);var ne=function(e){Object(S.a)(t,e);var a=Object(x.a)(t);function t(){var e;return Object(j.a)(this,t),(e=a.call(this)).state={orderId:"",orderStatus:"",currentStep:0,completedStep:0,cityId:{id:"",name:""},pointId:{id:"",name:""},car:"",carId:{},currentColor:"\u041b\u044e\u0431\u043e\u0439",dateFrom:0,dateTo:0,rateId:{rateTypeId:{},price:0},price:0,isFullTank:!1,isNeedChildChair:!1,isRightWheel:!1},e.handleChange=e.handleChange.bind(Object(H.a)(e)),e.handleClick=e.handleClick.bind(Object(H.a)(e)),e.stepNavigation=e.stepNavigation.bind(Object(H.a)(e)),e.getInfo=e.getInfo.bind(Object(H.a)(e)),e.getLocation=e.getLocation.bind(Object(H.a)(e)),e.getPrice=e.getPrice.bind(Object(H.a)(e)),e}return Object(I.a)(t,[{key:"componentDidMount",value:function(){if(!this.state.orderId){var e=localStorage.getItem("orderId");e&&this.setState({orderId:e})}}},{key:"handleChange",value:function(e){var a=e.target,t=a.name,n=a.value;"cityId"!==t?this.setState(Object(q.a)({},t,n)):this.setState({cityId:{id:"",name:""},pointId:{id:"",name:""}})}},{key:"handleClick",value:function(e){var a=e.target.name;this.setState((function(e){return Object(q.a)({},a,!e[a])}))}},{key:"getLocation",value:function(e,a){this.setState((function(t){return"pointId"===e?Object(q.a)({cityId:a.cityId||t.cityId},e,a):Object(q.a)({},e,a)}))}},{key:"getInfo",value:function(e,a){this.setState(Object(q.a)({},e,a)),"orderId"===e&&localStorage.setItem("orderId",a)}},{key:"stepNavigation",value:function(){+this.state.currentStep===+this.state.completedStep?this.setState((function(e){return{currentStep:+e.currentStep+1,completedStep:+e.completedStep+1}})):this.setState((function(e){return{currentStep:+e.currentStep+1}}))}},{key:"getPrice",value:function(){var e=(new Date(this.state.dateTo)-new Date(this.state.dateFrom))/6e4,a=(this.state.isFullTank&&500)+(this.state.isNeedChildChair&&200)+(this.state.isRightWheel&&1600);return Math.round("\u041f\u043e\u043c\u0438\u043d\u0443\u0442\u043d\u043e"===this.state.rateId.rateTypeId.name?e*this.state.rateId.price+a:e/1440*this.state.rateId.price+a)}},{key:"render",value:function(){var e=this,a=this.state,t=a.isNeedChildChair,n=a.isRightWheel,r=a.isFullTank,o=a.currentStep,i=a.currentColor,l=a.completedStep,s=a.dateFrom,m=a.carId,d=a.rateId,u=a.dateTo,p=a.cityId,_=a.pointId,h=a.orderId,b=a.orderStatus,f="http://api-factory.simbirsoft1.com/api/db/",E={"X-Api-Factory-Application-Id":"5e25c641099b810b946c5d5b"},g=[c.a.createElement(X,{api:f,headers:E,action:this.handleChange,city:p,point:_,orderId:h,getLocation:this.getLocation}),c.a.createElement(Y,{actionCar:this.getInfo,api:f,headers:E,action:this.handleChange,currentCar:m.name}),c.a.createElement(V,{api:f,headers:E,action:this.handleChange,actionClick:this.handleClick,actionInfo:this.getInfo,currentColor:i,colors:m.colors,dateFrom:s,dateTo:u,options:[r,t,n],tariff:d.rateTypeId.name}),c.a.createElement(K,{carId:m,dateFrom:s})],v={orderStatusId:{name:"new",id:"5e26a191099b810b946c5d89"},cityId:{id:p.id},pointId:{id:_.id},carId:{id:m.id},color:i,dateFrom:+new Date(s),dateTo:+new Date(u),rateId:{id:d.id},price:this.getPrice(),isFullTank:r,isNeedChildChair:t,isRightWheel:n};return c.a.createElement("div",{className:"order-page"},c.a.createElement(F,null),h?c.a.createElement("div",{className:"final-page__nav"},c.a.createElement("p",null,"\u0417\u0430\u043a\u0430\u0437 \u043d\u043e\u043c\u0435\u0440 ","RU".concat(h.replace(/\D/gm,"")))):c.a.createElement("div",{className:"order-page__nav"},[{value:0,description:"\u041c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"},{value:1,description:"\u041c\u043e\u0434\u0435\u043b\u044c"},{value:2,description:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e"},{value:3,description:"\u0418\u0442\u043e\u0433\u043e"}].map((function(a,t){return c.a.createElement(te,{key:t,value:a.value,description:a.description,action:e.handleChange,completedStep:l})}))),c.a.createElement("div",{className:"order-page__container"},c.a.createElement(G.d,null,c.a.createElement(G.b,{exact:!0,path:"/order-page/order/:orderId"},c.a.createElement(ae,{api:f,orderStatus:b,getInfo:this.getInfo,headers:E}))),c.a.createElement(G.d,null,h&&c.a.createElement(G.a,{from:"/order-page/",to:"/order-page/order/".concat(h)}),c.a.createElement(G.b,{exact:!0,path:"/order-page/",render:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"order-page__container__form"},g[o]),c.a.createElement("div",{className:"order-page__container__total"},c.a.createElement(ee,{api:f,action:e.stepNavigation,params:e.state,getPrice:e.getPrice,orderData:v,getInfo:e.getInfo})))}}))))}}]),t}(c.a.Component),ce=t(6);t(90),t(91);var re=function(){return c.a.createElement("span",{className:"loader-wrapper"},c.a.createElement("div",{className:"cssload-loader"},c.a.createElement("div",{className:"cssload-inner cssload-one"}),c.a.createElement("div",{className:"cssload-inner cssload-two"}),c.a.createElement("div",{className:"cssload-inner cssload-three"})))};var oe=function(){var e=Object(G.g)(),a=Object(n.useState)(""),t=Object(A.a)(a,2),r=t[0],o=t[1],i=Object(n.useState)(""),l=Object(A.a)(i,2),s=l[0],m=l[1],d=Object(n.useState)(!1),u=Object(A.a)(d,2),p=u[0],_=u[1],h=Object(n.useState)(!1),b=Object(A.a)(h,2),f=b[0],E=b[1];function g(e){var a=e.target,t=a.name,n=a.value;"login"===t?m(n):o(n),_(!1)}var v=btoa(function(e){for(var a="1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM",t="",n=0;n<e;n++){t+=a[Math.floor(Math.random()*a.length)]}return t}(6)+":4cbcea96de"),N={"X-Api-Factory-Application-Id":"5e25c641099b810b946c5d5b","Content-Type":"application/json",Authorization:"Basic "+v};function k(a){a.preventDefault(),E(!0);var t={username:s,password:r};fetch("".concat("http://api-factory.simbirsoft1.com/api/","auth/login"),{method:"POST",headers:N,body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){document.cookie="basicToken=".concat(v,";\n         max-age=").concat(e.expires_in,"; path='/need-for-drive/admin"),document.cookie="access_token=".concat(e.access_token,";\n         max-age=").concat(e.expires_in,"; path='/need-for-drive/admin"),document.cookie="refresh_token=".concat(e.refresh_token,";\n         max-age=").concat(e.expires_in,"; path='/need-for-drive/admin"),E(!1)})).then((function(){return e.push("/admin/")})).catch((function(e){console.error("ERROR",e),_(!0),E(!1)}))}return c.a.createElement(c.a.Fragment,null,f?c.a.createElement(re,null):c.a.createElement("div",{className:"authorization"},c.a.createElement("span",{className:"authorization__heading"},c.a.createElement("span",{className:"logo"}),c.a.createElement("h2",{className:"authorization__heading__head"},"Need for drive")),c.a.createElement("div",{className:"authorization__login-block"},c.a.createElement("h3",{className:"authorization__login-block__name"},"\u0412\u0445\u043e\u0434"),c.a.createElement("form",{onSubmit:k,className:"authorization__login-block__form"},c.a.createElement("fieldset",{className:"authorization__login-block__form__fieldset  ".concat(p&&"error")},c.a.createElement("legend",null,"\u041b\u043e\u0433\u0438\u043d"),c.a.createElement("input",{className:"admin__input",name:"login",type:"text",value:s,onChange:g})),c.a.createElement("fieldset",{className:"authorization__login-block__form__fieldset  ".concat(p&&"error")},c.a.createElement("legend",null,"\u041f\u0430\u0440\u043e\u043b\u044c"),c.a.createElement("input",{className:"admin__input",name:"password",value:r,onChange:g,type:"password"}),p&&c.a.createElement("span",null,"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c")),c.a.createElement("span",{className:"authorization__login-block__form__buttons-block"},c.a.createElement("a",{className:"admin__link",href:"mailto:advice@simbirsoft.com"},"\u0417\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f"),c.a.createElement("button",{onClick:k,className:"admin__button blue",type:"submit",disabled:!r||!s},"\u0412\u043e\u0439\u0442\u0438"))))))};t(92),t(93);function ie(e){var a=e.title,t=e.url,r=e.icon,o=Object(n.useState)(""),i=Object(A.a)(o,2),l=i[0],s=i[1],m=Object(G.h)();return Object(n.useEffect)((function(){s(m.pathname)}),[m]),c.a.createElement(R.b,{to:t,className:"sidebar__link ".concat(l===t?"active":"")},c.a.createElement("span",{className:"sidebar__link__icon ".concat(r," ")}),c.a.createElement("p",null,a))}var le=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("a",{className:"sidebar__head"},c.a.createElement("span",{className:"logo"}),c.a.createElement("p",null,"Need for drive")),[{name:"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f",url:"/admin/car-edit-card",icon:"edit"},{name:"\u0421\u043f\u0438\u0441\u043e\u043a \u0430\u0432\u0442\u043e",url:"/admin/car-list",icon:"carList"},{name:"\u0417\u0430\u043a\u0430\u0437\u044b",url:"/admin/orders",icon:"orders"},{name:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u043e\u0447\u0435\u043a \u0432\u044b\u0434\u0430\u0447\u0438",url:"/admin/points",icon:"overview"},{name:"\u0422\u0430\u0440\u0438\u0444\u044b",url:"/admin/rate-list",icon:"forms"},{name:"\u0422\u043e\u0447\u043a\u0438 \u0432\u044b\u0434\u0430\u0447\u0438",url:"/admin/points-list",icon:"person"},{name:"\u041c\u0435\u043d\u044e 4",url:"/admin/menu4",icon:"error"}].map((function(e,a){return c.a.createElement(ie,{url:e.url,title:e.name,icon:e.icon,key:a})})))},se=t(44),me=t.n(se);t(94);var de=function(e){var a=e.userName,t=e.api,n=e.setLoad,r=e.getCookie,o=Object(G.g)();return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{className:"searching-form"},c.a.createElement("span",{className:"icon shape"}),c.a.createElement("input",{className:"searching-form__input",type:"text",name:"search",placeholder:"\u041f\u043e\u0438\u0441\u043a.."})),c.a.createElement("div",{className:"notifications-block"},c.a.createElement("span",{className:"notifications-block__icon"}),c.a.createElement("span",{className:"notifications-block__counter"},"1")),c.a.createElement("div",{className:"user-block"},c.a.createElement("div",{className:"user-block__group"},c.a.createElement("span",{className:"user-block__group__user-info"},c.a.createElement("img",{className:"user-block__group__user-info__user-pic",src:me.a}),c.a.createElement("p",{className:"user-block__group__user-info__user-name"},a||"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440")),c.a.createElement("span",{className:"user-block__wrapper"},c.a.createElement("span",null))),c.a.createElement("div",{className:"user-block__logout"},c.a.createElement("button",{onClick:function(){var e={"X-Api-Factory-Application-Id":"5e25c641099b810b946c5d5b",Authorization:"Bearer "+r("access_token")};n(!0),fetch("".concat(t,"auth/logout"),{method:"POST",headers:e}).then((function(){document.cookie="basicToken='';\n         max-age=0;\n         path='/need-for-drive/admin",document.cookie="access_token='';\n         max-age=0;\n         path='/need-for-drive/admin",document.cookie="refresh_token='';\n         max-age=0;\n         path='/need-for-drive/admin"})).then((function(){n(!0),o.push("/admin/authorization"),n(!1)})).catch((function(e){n(!0),o.push("/admin/authorization"),n(!1)}))}},"\u0412\u044b\u0439\u0442\u0438"))))};t(95);var ue=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"admin-panel__container__bottombar__link-block"},c.a.createElement(R.b,{className:"admin__link",to:"/"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"),c.a.createElement(R.b,{className:"admin__link",to:"/order-page/"},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432")),c.a.createElement("p",{className:"admin-panel__container__bottombar__copyright"},"Copyright \xa9 2020 Simbirsoft"))},pe=(t(96),t(23)),_e=t.n(pe);t(97);var he=function(e){var a=e.page,t=e.countPages,n=e.setPage;function r(e){var t=e.target,c=t.name,r=t.value;switch(c){case"back":n(+a-1);break;case"forward":n(+a+1);break;default:n(r)}}return c.a.createElement("div",{className:"pagination-wrapper"},c.a.createElement("div",{className:"admin__pagination"},1!=t&&c.a.createElement("button",{className:"admin__pagination__button arrow",onClick:r,disabled:!(+a-1),name:"back"},"<<"),c.a.createElement("button",{className:"admin__pagination__button",onClick:r,value:1,disabled:1===+a},"1"),a<3&&t>5?c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:"admin__pagination__button",onClick:r,value:2,disabled:2===+a},"2"),c.a.createElement("button",{className:"admin__pagination__button",onClick:r,value:3,disabled:3===+a},"3"),c.a.createElement("p",{className:"admin__pagination__dots"},"...")):a>t-3&&t>5?c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:"admin__pagination__dots"},"..."),c.a.createElement("button",{className:"admin__pagination__button",onClick:r,disabled:+a===t-2,value:+t-2},+t-2),c.a.createElement("button",{className:"admin__pagination__button",onClick:r,disabled:+a===t-1,value:+t-1},+t-1)):t<6?c.a.createElement(c.a.Fragment,null,t>2&&c.a.createElement("button",{className:"admin__pagination__button",onClick:r,disabled:2===+a,value:2},"2"),t>3&&c.a.createElement("button",{className:"admin__pagination__button",onClick:r,disabled:3===+a,value:3},"3"),t>4&&c.a.createElement("button",{className:"admin__pagination__button",onClick:r,disabled:4===+a,value:4},"4")):c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:"admin__pagination__dots"},"..."),c.a.createElement("button",{className:"admin__pagination__button",onClick:r,value:+a-1},+a-1),c.a.createElement("button",{className:"admin__pagination__button",onClick:r,value:+a,disabled:!0},+a),c.a.createElement("button",{className:"admin__pagination__button",disabled:+a===+a+1,onClick:r,value:+a+1},+a+1),c.a.createElement("p",{className:"admin__pagination__dots"},"...")),1!=t&&c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:"admin__pagination__button",onClick:r,disabled:+a===+t,value:t},t),c.a.createElement("button",{className:"admin__pagination__button arrow",onClick:r,name:"forward",disabled:+a+1>t},">>")))," ")},be=function(){function e(a,t,n,c){Object(j.a)(this,e),this.apiParams=a,this.method=t,this.api="https://api-factory.simbirsoft1.com/api/",this.headers={"X-Api-Factory-Application-Id":"5e25c641099b810b946c5d5b","Content-Type":"application/json",Authorization:n},this.body=JSON.stringify(c)}return Object(I.a)(e,[{key:"doRequest",value:function(){return fetch("".concat(this.api).concat(this.apiParams),{method:this.method,headers:this.headers,body:this.body}).then((function(e){return e.json()}))}}]),e}();var fe=function(e){e.api,e.headers;var a=e.getCookie,t=Object(G.g)(),r=Object(n.useState)(!1),o=Object(A.a)(r,2),i=o[0],l=o[1],s=Object(n.useState)(!0),m=Object(A.a)(s,2),d=m[0],u=m[1],p=Object(n.useState)(1),_=Object(A.a)(p,2),h=_[0],b=_[1],f=Object(n.useState)({}),E=Object(A.a)(f,2),g=E[0],v=E[1],N=Object(n.useState)(1),k=Object(A.a)(N,2),y=k[0],O=k[1],C=Object(n.useState)({cities:[],cars:[],statuses:[]}),j=Object(A.a)(C,2),I=j[0],S=j[1],x=Object(n.useState)({date:0,carId:"",cityId:"",status:""}),w=Object(A.a)(x,2),T=w[0],R=w[1];function F(){u(!0);var e=T.carId,n=T.date,c=T.cityId,r=T.status;new be("db/order?page=".concat(h-1,"&limit=1&createdAt[$gt]=").concat(n).concat(e&&"&carId="+e).concat(c&&"&cityId="+c).concat(r&&"&orderStatusId="+r),"GET","Bearer ".concat(a("access_token"))).doRequest().then((function(e){v(e.data[0]),O(e.count),u(!1)})).catch((function(e){t.push("/admin/error-page"),console.error("ERROR",e)}))}function P(e){var a=new Date,t=e.target,n=t.name,c=t.value;if("date"===n)switch(c){case"all":R(Object(ce.a)(Object(ce.a)({},T),{},Object(q.a)({},n,0)));break;case"month":R(Object(ce.a)(Object(ce.a)({},T),{},Object(q.a)({},n,a.setMonth(a.getMonth()-1))));break;case"week":R(Object(ce.a)(Object(ce.a)({},T),{},Object(q.a)({},n,a.setDate(a.getDate()-7))));break;case"day":R(Object(ce.a)(Object(ce.a)({},T),{},Object(q.a)({},n,a.setDate(a.getDate()-1))));break;case"hours":R(Object(ce.a)(Object(ce.a)({},T),{},Object(q.a)({},n,a.setHours(a.getHours()-3))))}else"carId"!==n&&"cityId"!==n&&"status"!==n||R(Object(ce.a)(Object(ce.a)({},T),{},Object(q.a)({},n,c)))}return Object(n.useEffect)((function(){F()}),[h]),c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",{className:"admin__heading"},"\u0417\u0430\u043a\u0430\u0437\u044b"),c.a.createElement("div",{className:"order-block"},c.a.createElement("div",{className:"order-block__sort-container"},c.a.createElement("span",{onClick:function(){var e,a,t,n=new be("db/car/","GET"),c=new be("db/city/","GET"),r=new be("db/orderStatus/","GET");i||c.doRequest().then((function(e){var t=e.data;a=t})).then((function(){n.doRequest().then((function(a){var t=a.data;e=t})).then((function(){r.doRequest().then((function(e){var a=e.data;t=a})).then((function(){return S({cars:e,cities:a,statuses:t})}))}))})),l(!i)},className:"filter-icon"}),i&&c.a.createElement("form",{className:"order-block__sort-container__sort"},c.a.createElement("select",{onChange:P,name:"date",className:"admin__select"},c.a.createElement("option",{value:"all"},"\u0417\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f"),c.a.createElement("option",{value:"month"},"\u0417\u0430 \u043c\u0435\u0441\u044f\u0446"),c.a.createElement("option",{value:"week"},"\u0417\u0430 \u043d\u0435\u0434\u0435\u043b\u044e"),c.a.createElement("option",{value:"day"},"\u0417\u0430 \u0441\u0443\u0442\u043a\u0438"),c.a.createElement("option",{value:"hours"},"\u0417\u0430 \u0442\u0440\u0438 \u0447\u0430\u0441\u0430")),c.a.createElement("select",{onChange:P,className:"admin__select",name:"carId"},c.a.createElement("option",{value:""},"\u041b\u044e\u0431\u0430\u044f \u043c\u0430\u0440\u043a\u0430"),I&&I.cars.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)}))),c.a.createElement("select",{onChange:P,className:"admin__select",name:"cityId"},c.a.createElement("option",{value:""},"\u0412\u0441\u0435 \u0433\u043e\u0440\u043e\u0434\u0430"),I&&I.cities.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)}))),c.a.createElement("select",{onChange:P,className:"admin__select",name:"status"},c.a.createElement("option",{value:""},"\u0412\u0441\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044b"),I&&I.statuses.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)}))),c.a.createElement("button",{onClick:F,className:"admin__button blue",type:"button"},"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"))),c.a.createElement("div",{className:"order-block__info"},d?c.a.createElement(re,null):g?c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"order-block__info__part"},c.a.createElement("img",{crossOrigin:"anonymous",referrerPolicy:"origin",className:"order-block__info__img",src:g.carId.thumbnail.path?"http://api-factory.simbirsoft1.com".concat(g.carId.thumbnail.path):_e.a,alt:"car"}),c.a.createElement("p",{className:"order-block__info__text"},c.a.createElement("span",null,g.carId.name||"\u041c\u0410\u0420\u041a\u0410")," \u0432"," ",c.a.createElement("span",null,g.cityId.name||"\u0413\u043e\u0440\u043e\u0434"," ",g.pointId.address||"\u0423\u043b\u0438\u0446\u0430")," ",c.a.createElement("br",null),new Date(g.dateFrom).toLocaleString("RU")||"01.01.2001 01:01"," ","-"," ",new Date(g.dateTo).toLocaleString("RU")||"01.01.2001 01:01",c.a.createElement("br",null),"\u0426\u0432\u0435\u0442: ",c.a.createElement("span",null,g.color||"\u0411\u0435\u043b\u044b\u0439"))),c.a.createElement("span",{className:"order-block__info__part"},c.a.createElement("span",{className:"order-block__info__chechboxes"},[{name:"isFullTank",description:"\u041f\u043e\u043b\u043d\u044b\u0439 \u0431\u0430\u043a"},{name:"isNeedChildChair",description:"\u0414\u0435\u0442\u0441\u043a\u043e\u0435 \u043a\u0440\u0435\u0441\u043b\u043e"},{name:"isRightWheel",description:"\u041f\u0440\u0430\u0432\u044b\u0439 \u0440\u0443\u043b\u044c"}].map((function(e,a){return c.a.createElement(n.Fragment,{key:a},c.a.createElement(U,{type:"checkbox",description:e.description,name:e.name,checked:g[e.name],readOnly:!0}),c.a.createElement("br",null))}))),c.a.createElement("p",{className:"order-block__info__cost"},g.price||"00000"," \u20bd"),c.a.createElement("span",{className:"order-block__info__buttons"},c.a.createElement("button",{className:"order-block__info__buttons__ok"},c.a.createElement("span",null,"\u2714")," \u0413\u043e\u0442\u043e\u0432\u043e"),c.a.createElement("button",{className:"order-block__info__buttons__cancel"},c.a.createElement("span",null,"\u2716")," \u041e\u0442\u043c\u0435\u043d\u0430"),c.a.createElement("button",{className:"order-block__info__buttons__edit"},c.a.createElement("span",null,"\u205d")," \u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c")))):"\u0417\u0430\u043a\u0430\u0437\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"),g&&c.a.createElement(he,{setPage:b,page:h,countPages:y})))};t(98);var Ee=function(e){var a=e.errorCode,t=Object(G.g)();return c.a.createElement("div",{className:"error-page"},c.a.createElement("h1",{className:"error-page__code"},a||"404"),c.a.createElement("h2",{className:"error-page__description"},"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"),c.a.createElement("h3",{className:"error-page__small-text"},a?"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443":"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"),c.a.createElement("button",{onClick:function(){t.push("/admin")},className:"admin__button blue"},"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f"))};t(99);var ge=function(e){var a=e.legend,t=e.onChange,n=e.error,r=e.name,o=e.value,i=e.placeholder,l=e.errorText;return c.a.createElement("fieldset",{className:"admin__fieldset"},c.a.createElement("legend",null,a),c.a.createElement("input",{onChange:t,type:"text",className:"admin__input ".concat(n&&"error"),name:r,value:o,placeholder:i}),n&&c.a.createElement("p",{className:"admin__input__error-text"},l)," ")},ve=function(e){Object(S.a)(t,e);var a=Object(x.a)(t);function t(e){var n;return Object(j.a)(this,t),(n=a.call(this,e)).state={model:"",type:"",colors:[],file:"",category:"5e25c99a099b810b946c5d63",addColor:"",description:"",errors:{addColor:!1,description:!1,file:!1,model:!1}},n.handleChange=n.handleChange.bind(Object(H.a)(n)),n.addColor=n.addColor.bind(Object(H.a)(n)),n.createNewCar=n.createNewCar.bind(Object(H.a)(n)),n.fileHandler=n.fileHandler.bind(Object(H.a)(n)),n}return Object(I.a)(t,[{key:"handleChange",value:function(e){var a=e.target,t=a.name,n=a.value;this.setState(Object(q.a)({},t,n)),""===n&&this.setState((function(e){return{errors:Object(ce.a)(Object(ce.a)({},e.errors),{},Object(q.a)({},t,!1))}}))}},{key:"addColor",value:function(e){e.preventDefault(),this.state.colors.includes(this.state.addColor)?this.setState((function(e){return{errors:Object(ce.a)(Object(ce.a)({},e.errors),{},{addColor:!0})}})):this.setState((function(e){return{colors:[].concat(Object($.a)(e.colors),[e.addColor]),addColor:"",errors:Object(ce.a)(Object(ce.a)({},e.errors),{},{addColor:!1})}}))}},{key:"fileHandler",value:function(e){var a=this,t=e.target.files[0],n=new FileReader;n.readAsDataURL(t),n.onload=function(){a.setState({file:t,fileToSend:n.result})},n.onerror=function(){return console.log(n.error)}}},{key:"createNewCar",value:function(){var e=this.state,a=e.model,t=e.fileToSend,n=e.file,c=e.description,r=e.category,o=e.colors,i={priceMax:5e4,priceMin:1e3,name:a,thumbnail:{originalname:n.name,mimetype:n.type,size:n.size,path:t},description:c,categoryId:{id:r,name:"econom"},colors:o};new be("db/car","POST","Bearer ".concat(this.props.getCookie("access_token")),i).doRequest().then((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,a=+(this.state.model&&20)+ +(this.state.type&&20)+ +(this.state.colors.length&&20)+ +(this.state.file&&20)+ +(this.state.description&&20);return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",{className:"admin__heading"},"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f"),c.a.createElement("div",{className:"car-edit__container"},c.a.createElement("div",{className:"car-edit__container__car-block"},c.a.createElement("img",{crossOrigin:"anonymous",referrerPolicy:"origin",className:"car-edit__container__car-block__img",src:this.state.file?URL.createObjectURL(this.state.file):_e.a,alt:"car"}),c.a.createElement("h2",null,this.state.model||"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f"),c.a.createElement("h3",null,this.state.type||"\u0422\u0438\u043f \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f"),c.a.createElement("form",{id:"file-form",className:"car-edit__container__car-block__file-form"},c.a.createElement("label",{className:"admin__file-loader",htmlFor:"fileLoader"},c.a.createElement("span",{className:"admin__file-loader__text"},this.state.file?this.state.file.name:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b..."),c.a.createElement("input",{id:"fileLoader",type:"file",name:"file",accept:"image/*",required:!0,onChange:this.fileHandler}),c.a.createElement("span",{className:"admin__file-loader__button"},"\u041e\u0431\u0437\u043e\u0440"))),c.a.createElement("div",{className:"car-edit__container__car-block__counter"},c.a.createElement("p",{className:"car-edit__container__car-block__counter__text"},"\u0417\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e:"),c.a.createElement("p",{className:"car-edit__container__car-block__counter__text"},a||0,"%"),c.a.createElement("span",{className:"car-edit__container__car-block__counter__container"},c.a.createElement("span",{style:{width:"".concat(a||0,"%")},className:"car-edit__container__car-block__counter__container__line"}))),c.a.createElement("div",{className:"car-edit__container__car-block__description"},c.a.createElement("p",{className:"car-edit__container__car-block__description__text"},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),c.a.createElement("textarea",{className:"admin__textarea",name:"description",cols:"30",rows:"5",maxLength:"196",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f",value:this.state.description,onChange:this.handleChange}))),c.a.createElement("div",{className:"car-edit__container__additional-block"},c.a.createElement("div",{className:"car-edit__container__additional-block__form"},c.a.createElement("h2",null,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f"),c.a.createElement("span",{className:"car-edit__container__additional-block__form__group"},c.a.createElement(ge,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043c\u043e\u0434\u0435\u043b\u044c \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f",legend:"\u041c\u043e\u0434\u0435\u043b\u044c \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f",onChange:this.handleChange,value:this.state.model,name:"model",error:this.state.errors.model,errorText:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f"}),c.a.createElement(ge,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0438\u043f \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f",legend:"\u0422\u0438\u043f \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f",onChange:this.handleChange,value:this.state.type,name:"type",error:!1,errorText:""})),c.a.createElement("span",{className:"car-edit__container__additional-block__form__group"},c.a.createElement("fieldset",null,c.a.createElement("legend",null,"\u041a\u043b\u0430\u0441\u0441 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f"),c.a.createElement("label",{className:"admin__radio"},c.a.createElement("input",{type:"radio",name:"category",value:"5e25c98d099b810b946c5d62",id:"econom",onChange:this.handleChange}),c.a.createElement("span",null,"\u042d\u043a\u043e\u043d\u043e\u043c")),c.a.createElement("label",{className:"admin__radio"},c.a.createElement("input",{type:"radio",name:"category",defaultChecked:!0,id:"premium",value:"5e25c99a099b810b946c5d63",onChange:this.handleChange}),c.a.createElement("span",null,"\u041f\u0440\u0435\u043c\u0438\u0443\u043c")))),c.a.createElement("span",{className:"car-edit__container__additional-block__form__group"},c.a.createElement("form",{onSubmit:this.addColor},c.a.createElement("span",null,c.a.createElement(ge,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0446\u0432\u0435\u0442",legend:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0446\u0432\u0435\u0442\u0430",onChange:this.handleChange,value:this.state.addColor,name:"addColor",error:this.state.errors.addColor,errorText:"\u042d\u0442\u043e\u0442 \u0446\u0432\u0435\u0442 \u0443\u0436\u0435 \u0432\u044b\u0431\u0440\u0430\u043d"}),c.a.createElement("button",{className:"plus-btn",type:"submit",disabled:!this.state.addColor},c.a.createElement("span",null)))),c.a.createElement("div",{className:"car-edit__container__additional-block__form__group__checkboxes"},this.state.colors.map((function(a,t){return c.a.createElement("label",{key:+new Date+t},c.a.createElement("input",{type:"checkbox",defaultChecked:!0,onChange:function(){return e.setState((function(e){var a=Object($.a)(e.colors);return a.splice(t,1),{colors:a}}))}}),c.a.createElement("span",null,a))}))))),c.a.createElement("div",{className:"car-edit__container__additional-block__btn-bar"},c.a.createElement("span",null,c.a.createElement("button",{className:"admin__button blue",onClick:this.createNewCar},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),c.a.createElement("button",{className:"admin__button gray"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")),c.a.createElement("span",null,c.a.createElement("button",{className:"admin__button red"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))))))}}]),t}(c.a.Component),Ne=(t(100),function(e){Object(S.a)(t,e);var a=Object(x.a)(t);function t(e){var n;return Object(j.a)(this,t),(n=a.call(this,e)).state={point:""},n.ymaps=null,n.onClickHandler=n.onClickHandler.bind(Object(H.a)(n)),n}return Object(I.a)(t,[{key:"onLoadMap",value:function(e){this.ymaps=e}},{key:"onClickHandler",value:function(e){var a=this;this.props.handler("");var t=e.get("coords")||e.get("request");this.ymaps.geocode(t,{json:!0,results:1}).then((function(e){var t=e.GeoObjectCollection.featureMember[0].GeoObject;a.setState({point:t,coords:t.Point.pos}),"house"===t.metaDataProperty.GeocoderMetaData.kind&&(console.log(t.metaDataProperty.GeocoderMetaData.kind),a.props.handler(t)),a.map.setCenter(t.Point.pos.split(" ",2).reverse(),[17])}))}},{key:"render",value:function(){var e=this;return c.a.createElement(B.f,{query:{ns:"use-load-option",apikey:"74a51f5a-db87-407e-a41b-db660460a9fb"},className:"map"},c.a.createElement(B.c,{instanceRef:function(a){return e.map=a},width:"100%",height:"100%",onLoad:function(a){e.onLoadMap(a)},onClick:this.onClickHandler,defaultState:{center:[54.299777,48.373667],zoom:14},modules:["geolocation","geocode","geoObject.addon.hint"]},this.state.point&&c.a.createElement(B.d,{geometry:this.state.point.Point.pos.split(" ",2).reverse(),options:{preset:"islands#autoCircleIcon",iconColor:"rgb(0 123 255)",iconShadow:!0},properties:{iconCaption:this.state.point.name+" "+this.state.point.description}}),c.a.createElement(B.g,{options:{float:"right"}}),c.a.createElement(B.b,null),c.a.createElement(B.e,{onSubmit:this.onClickHandler,options:{float:"right",noPlacemark:!0}})))}}]),t}(c.a.Component)),ke=function(e){Object(S.a)(t,e);var a=Object(x.a)(t);function t(e){var n;return Object(j.a)(this,t),(n=a.call(this,e)).state={pointName:"",address:""},n.onChangeHandler=n.onChangeHandler.bind(Object(H.a)(n)),n.handler=n.handler.bind(Object(H.a)(n)),n}return Object(I.a)(t,[{key:"onChangeHandler",value:function(e){var a=e.target,t=a.name,n=a.value;this.setState(Object(q.a)({},t,n))}},{key:"handler",value:function(e){this.setState({address:e})}},{key:"createPoint",value:function(){var e=this,a=this.state.address.metaDataProperty.GeocoderMetaData.Address.Components.find((function(e){return"locality"===e.kind})).name;new be("db/city/","GET").doRequest().then((function(a){var t=a.data;return e.setState({cities:t})})).then((function(){var t=e.state.cities.filter((function(e){return e.name===a}));t.length?new be("db/point","POST","Bearer ".concat(e.props.getCookie("access_token")),{name:e.state.pointName,cityId:t[0],address:e.state.address.name}).doRequest():new be("db/city","POST","Bearer ".concat(e.props.getCookie("access_token")),{name:a}).doRequest().then((function(a){var t=a.data;return new be("db/point","POST","Bearer ".concat(e.props.getCookie("access_token")),{name:e.state.pointName,cityId:t,address:e.state.address.name}).doRequest()}))})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",{className:"admin__heading"},"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u043e\u0447\u043a\u0438 \u0432\u044b\u0434\u0430\u0447\u0438"),c.a.createElement("div",{className:"city-point-card"},c.a.createElement("div",{className:"city-point-card__content"},c.a.createElement("h3",{className:"admin__heading"},"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0442\u043e\u0447\u043a\u0443 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435:"),c.a.createElement("div",{className:"city-point-card__map"},c.a.createElement(Ne,{handler:this.handler})),c.a.createElement("div",{className:"city-point-card__content__info"},c.a.createElement("h2",{className:"city-point-card__content__info__head"},"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u043e\u0447\u043a\u0438:"),c.a.createElement("fieldset",null,c.a.createElement("legend",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0439 \u0442\u043e\u0447\u043a\u0438 \u0432\u044b\u0434\u0430\u0447\u0438"),c.a.createElement("input",{onChange:this.onChangeHandler,className:"admin__input",type:"text",name:"pointName"})),c.a.createElement("p",{className:"city-point-card__content__info__text"},c.a.createElement("span",{className:"city-point-card__content__info__text__bold"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0447\u043a\u0438:"),this.state.pointName||"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),this.state.address?c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:"city-point-card__content__info__text"},c.a.createElement("span",{className:"city-point-card__content__info__text__bold"},"\u0413\u043e\u0440\u043e\u0434:"),this.state.address.metaDataProperty.GeocoderMetaData.Address.Components.find((function(e){return"locality"===e.kind})).name),c.a.createElement("p",{className:"city-point-card__content__info__text"},c.a.createElement("span",{className:"city-point-card__content__info__text__bold"},"\u0410\u0434\u0440\u0435\u0441:"),this.state.address.name),c.a.createElement("p",{className:"city-point-card__content__info__text"},c.a.createElement("span",{className:"city-point-card__content__info__text__bold"},"\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b:"),this.state.address.Point.pos)):c.a.createElement("p",{className:"city-point-card__content__info__text"},"\u0410\u0434\u0440\u0435\u0441 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d \u0438\u043b\u0438 \u0443\u043a\u0430\u0437\u0430\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e."),c.a.createElement("div",{className:"city-point-card__content__info__btn-bar"},c.a.createElement("button",{className:"admin__button blue",onClick:this.createPoint.bind(this)},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),c.a.createElement("button",{className:"admin__button red"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"))))))}}]),t}(c.a.Component);t(101);function ye(e){var a=e.img,t=e.carName,n=e.description,r=e.number,o=e.colors,i=e.updated,l=e.tank;return c.a.createElement("div",{className:"car-list-page__car-card"},c.a.createElement("div",{className:"car-list-page__car-card__img"},c.a.createElement("img",{crossOrigin:"anonymous",referrerPolicy:"origin",src:a?"http://api-factory.simbirsoft1.com".concat(a):_e.a,alt:"car"})),c.a.createElement("div",{className:"car-list-page__car-card__name"},c.a.createElement("p",null,t||"\u041c\u0430\u0440\u043a\u0430 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430")),c.a.createElement("div",{className:"car-list-page__car-card__number"},c.a.createElement("p",null,void 0!=r&&r?r:"\u041d\u043e\u043c\u0435\u0440 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d")),c.a.createElement("div",{className:"car-list-page__car-card__colors"},c.a.createElement("p",null,o?o.join(", "):"\u0426\u0432\u0435\u0442\u0430 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u044b")),c.a.createElement("div",{className:"car-list-page__car-card__tank"},c.a.createElement("p",null,(l||"0")+"%")),c.a.createElement("div",{className:"car-list-page__car-card__updated"},c.a.createElement("p",null,i?"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e: "+new Date(i).toLocaleDateString():"\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430")),c.a.createElement("div",{className:"car-list-page__car-card__description"},c.a.createElement("p",null,"undefined"!=n&&n?n:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e")))}var Oe=function(e){var a=e.getCookie,t=Object(n.useState)(1),r=Object(A.a)(t,2),o=r[0],i=r[1],l=Object(n.useState)(),s=Object(A.a)(l,2),m=s[0],d=s[1],u=Object(n.useState)(),p=Object(A.a)(u,2),_=p[0],h=p[1];return Object(n.useEffect)((function(){!function(e){new be("db/car?page=".concat(o-1,"&limit=").concat(e<1024?1:2),"GET","Bearer ".concat(a("access_token"))).doRequest().then((function(e){d(e.data),h(Math.ceil(e.count/2))}))}(document.documentElement.clientWidth)}),[o]),c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",{className:"admin__heading"},"\u0421\u043f\u0438\u0441\u043e\u043a \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439"),c.a.createElement("div",{className:"car-list-page"},m?c.a.createElement("div",{className:"car-list-page__container"},m.map((function(e){return c.a.createElement(ye,{key:e.id,img:e.thumbnail.path,carName:e.name,description:e.description,number:e.number,colors:e.colors,updated:e.updatedAt,tank:e.tank})}))):c.a.createElement(re,null),m&&c.a.createElement(he,{setPage:i,page:o,countPages:_})))};t(102);function Ce(e){var a=e.columns,t=e.data;return c.a.createElement("table",{className:"admin-table"},c.a.createElement("thead",{className:"admin-table__row head"},c.a.createElement("tr",null,a.map((function(e){return c.a.createElement("th",{className:"admin-table__cell head",key:e.dataName},e.name)})))),c.a.createElement("tbody",null,t.length>0?t.map((function(e){return c.a.createElement("tr",{key:e.id,className:"admin-table__row"},a.map((function(a){return c.a.createElement("td",{key:e[a.dataName],className:"admin-table__cell"},e[a.dataName])})))})):c.a.createElement("tr",{className:"admin-table__row"},c.a.createElement("td",{className:"admin-table__cell",colSpan:"3"},"\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"))))}t(103);var je=function(){var e=Object(n.useState)(),a=Object(A.a)(e,2),t=a[0],r=a[1];return Object(n.useEffect)((function(){new be("db/rate/","GET").doRequest().then((function(e){var a=e.data;return r(a.map((function(e){return{updatedAt:new Date(e.updatedAt).toLocaleString("RU"),price:"".concat(e.price," \u20bd \u0432 ").concat(e.rateTypeId.unit),id:e.id,name:e.rateTypeId.name}})))}))}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",{className:"admin__heading"},"\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u0430\u0440\u0438\u0444\u043e\u0432"),c.a.createElement("div",{className:"rate-page"},t?c.a.createElement(Ce,{columns:[{name:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0430\u0440\u0438\u0444\u0430",dataName:"name"},{name:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",dataName:"price"},{name:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e",dataName:"updatedAt"}],data:t}):c.a.createElement(re,null)))};t(104);var Ie=function(e){var a=e.getCookie,t=Object(n.useState)(),r=Object(A.a)(t,2),o=r[0],i=r[1],l=Object(n.useState)(1),s=Object(A.a)(l,2),m=s[0],d=s[1],u=Object(n.useState)(1),p=Object(A.a)(u,2),_=p[0],h=p[1],b=Object(n.useState)(""),f=Object(A.a)(b,2),E=f[0],g=f[1],v=Object(n.useState)(""),N=Object(A.a)(v,2),k=N[0],y=N[1],O=Object(n.useState)("name"),C=Object(A.a)(O,2),j=C[0],I=C[1],S=Object(n.useState)("1"),x=Object(A.a)(S,2),w=x[0],T=x[1];function R(e){var a=e.target,t=a.name,n=a.value;if("cityId"==t)y(n);else{switch(n){case"nameUp":I("name"),T("-1")}switch(n){case"addressUp":I("address"),T("-1")}switch(n){case"nameDown":I("name"),T("1")}switch(n){case"addressDown":I("address"),T("1")}}}return Object(n.useEffect)((function(){i(""),new be("db/point?page=".concat(m-1,"&limit=10").concat(k&&"&cityId="+k).concat(j&&"&sort[".concat(j,"]=").concat(w)),"GET","Bearer ".concat(a("access_token"))).doRequest().then((function(e){h(Math.ceil(e.count/10)),i(e.data.map((function(e){return{address:e.address,name:e.name,id:e.id,city:e.cityId.name}})))})).then((function(){return new be("db/city/","GET").doRequest().then((function(e){var a=e.data;return g(a)}))}))}),[m,k,j,w]),c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",{className:"admin__heading"},"\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u043e\u0447\u0435\u043a \u0432\u044b\u0434\u0430\u0447\u0438"),c.a.createElement("div",{className:"points-page"},c.a.createElement("div",{className:"points-page__sort"},c.a.createElement("select",{onChange:R,className:"admin__select",name:"cityId"},c.a.createElement("option",{value:""},"\u0412\u0441\u0435 \u0433\u043e\u0440\u043e\u0434\u0430"),E&&E.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)}))),c.a.createElement("select",{onChange:R,className:"admin__select",name:"sort"},c.a.createElement("option",{value:"nameDown"},"\u041f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e \u0410-\u042f \u2193"),c.a.createElement("option",{value:"nameUp"},"\u041f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e \u042f-\u0410 \u2191"),c.a.createElement("option",{value:"addressUp"},"\u041f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 \u042f-\u0410 \u2191"),c.a.createElement("option",{value:"addressDown"},"\u041f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 \u0410-\u042f \u2193"))),o?c.a.createElement(Ce,{columns:[{name:"\u0410\u0434\u0440\u0435\u0441",dataName:"address"},{name:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataName:"name"},{name:"\u0413\u043e\u0440\u043e\u0434",dataName:"city"}],data:o}):c.a.createElement("span",{className:"points-page__wrapper"},c.a.createElement(re,null)),c.a.createElement(he,{page:m,setPage:d,countPages:_>0?_:1})))};var Se=function(){var e=Object(n.useState)(!0),a=Object(A.a)(e,2),t=a[0],r=a[1],o=Object(n.useState)(""),i=Object(A.a)(o,2),l=i[0],s=i[1],m=Object(G.g)(),d=Object(G.h)();function u(e){var a=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return a?a[1]:void 0}Object(n.useEffect)((function(){!function(){var e=u("access_token"),a={"X-Api-Factory-Application-Id":"5e25c641099b810b946c5d5b","Content-Type":"application/json"};e?fetch("".concat(p,"auth/check"),{method:"GET",headers:Object(ce.a)(Object(ce.a)({},a),{},{Authorization:"Bearer "+e})}).then((function(e){return e.json()})).then((function(e){s(e.username),r(!1)})).catch((function(e){var t={refresh_token:u("refresh_token")};fetch("".concat(p,"auth/refresh"),{method:"POST",headers:Object(ce.a)(Object(ce.a)({},a),{},{Authorization:"Basic "+u("basicToken")}),body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){document.cookie="access_token=".concat(e.access_token,";\n          max-age=").concat(e.expires_in,";\n          path='/need-for-drive/admin"),document.cookie="refresh_token=".concat(e.refresh_token,";\n          max-age=").concat(e.expires_in,";\n          path=/need-for-drive/admin"),r(!1)})).catch((function(){"/admin/authorization"!=d.pathname&&m.push("/admin/authorization"),r(!1)}))})):"/admin/authorization"!=d.pathname&&(m.push("/admin/authorization"),r(!1));r(!1)}()}),[d]);var p="http://api-factory.simbirsoft1.com/api/";return c.a.createElement("div",{className:"admin-panel"},t?c.a.createElement(re,null):c.a.createElement(G.d,null,c.a.createElement(G.b,{path:"/admin/authorization"},t?c.a.createElement(re,null):c.a.createElement(oe,null)),c.a.createElement(G.b,{path:"/admin/"},c.a.createElement("div",{className:"admin-panel__container"},c.a.createElement("div",{className:"admin-panel__container__topbar"},c.a.createElement(de,{api:p,userName:l,getCookie:u,setLoad:r})),c.a.createElement("div",{className:"admin-panel__container__sidebar"},c.a.createElement(le,null)),c.a.createElement("div",{className:"admin-panel__container__content"},c.a.createElement(G.d,null,c.a.createElement(G.b,{exact:!0,path:"/admin/"},c.a.createElement("h1",{className:"admin__hello-text"},"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c, ",l||"\u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440","!")),c.a.createElement(G.b,{exact:!0,path:"/admin/car-edit-card"},c.a.createElement(ve,{getCookie:u})," "),c.a.createElement(G.b,{exact:!0,path:"/admin/car-list"},c.a.createElement(Oe,{getCookie:u})),c.a.createElement(G.b,{exact:!0,path:"/admin/orders"},c.a.createElement(fe,{getCookie:u})),c.a.createElement(G.b,{exact:!0,path:"/admin/points"},c.a.createElement(ke,{getCookie:u})),c.a.createElement(G.b,{exact:!0,path:"/admin/rate-list"},c.a.createElement(je,null)),c.a.createElement(G.b,{exact:!0,path:"/admin/points-list"},c.a.createElement(Ie,{getCookie:u})),c.a.createElement(G.b,{path:"/admin/*",component:Ee}))),c.a.createElement("div",{className:"admin-panel__container__bottombar"},c.a.createElement(ue,null))))))};var xe=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"App"},c.a.createElement(G.d,null,c.a.createElement(G.b,{exact:!0,path:"/"},c.a.createElement(L,null)," ",c.a.createElement(D,null)),c.a.createElement(G.b,{path:"/order-page/"},c.a.createElement(L,null)," ",c.a.createElement(ne,null)),c.a.createElement(G.b,{path:"/admin/",component:Se}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(R.a,{basename:"/need-for-drive/"},c.a.createElement(c.a.StrictMode,null,c.a.createElement(xe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}]),[[60,1,2]]]);
//# sourceMappingURL=main.3c642b85.chunk.js.map